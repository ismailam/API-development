<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: user.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: user.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'
 
/**@constant {schema} */
const userschema= require('../schema/userSchema')


/**
 * This module takes in new user information and post it to the database!
 * @param {object} userInfo - The username and passsword of new user.
 * @return {Promise&lt;object|Error>} message: user account created &amp; new user.
 */
exports.postUser=userInfo => new Promise( (resolve, reject) => {
	const user = new userschema.User(userInfo)

	user.save( (err, userI) => {
		if (err) reject(new Error('an error adding user to system'))
		resolve({message: 'User Account created!', userI})
	})
})

/**
 * This module takes in the username you which to update, checks if its available in the database and modifies it!
 * @param {string} userName - The username already created.
 * @param {string} newPassword - The new password to update.
 * @return {Promise&lt;object|Error>} message : user account updated &amp; updated password.
 */
exports.updatePassword = (userName, newPassword) => new Promise( (resolve, reject) => {
	userschema.User.findOneAndUpdate({username: userName}, {$set: {password: newPassword}}, {new: true}, (err, doc) => {
		if (err) reject(new Error('an error updating user data'))
		resolve({ message: 'user updated!', doc })
	})
 })

/**
 * This module takes in the username and deletes it from a database!
 * @param {string} userName - The username already created.
 * @return {Promise&lt;object|Error>} message: User successfully deleted!.
 */
exports.deleteUser = userName => new Promise( (resolve, reject) => {
	userschema.User.find({username: userName}).remove( (err) => {
		if (err) return reject(err)
		resolve({ message: 'User successfully deleted!' })
	})
})

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#deleteTenant">deleteTenant</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#distanceFromAgency">distanceFromAgency</a></li><li><a href="global.html#getLocation">getLocation</a></li><li><a href="global.html#getTenant">getTenant</a></li><li><a href="global.html#getTenants">getTenants</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#isPayed">isPayed</a></li><li><a href="global.html#postTenant">postTenant</a></li><li><a href="global.html#postUser">postUser</a></li><li><a href="global.html#updatePassword">updatePassword</a></li><li><a href="global.html#updateTenant">updateTenant</a></li><li><a href="global.html#userschema">userschema</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Dec 14 2016 14:49:36 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
